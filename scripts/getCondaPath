getCondaPath()
{
  if [ ! ${CONDA_PATH} ] ; then
    if ! . $QA_SRC/scripts/parseConfigFile CONDA_PATH ; then
       # Was $0 launched out of a conda installation?
       # Look for bin/conda in QA_SRC

       local i pth items sz
       declare -a items

       items=( ${0//\// } )
       sz=$(( ${#items[*]} - 1 )) # skip the executable, leave only path items

       for(( i=0; i < sz ; ++i )) ; do
         pth="${pth}/${items[i]}"

         if [ -f ${pth}/bin/conda ] ; then
             # no effect when write permission is not granted
             . $QA_SRC/scripts/parseConfigFile CONDA_PATH=${CONDA_PATH}

            isCondaInstance=t

            CONDA_PATH="${pth}/bin/conda"
            break
         fi
       done
    fi
  fi

  # CONDA_PATH could be empty, if conda is neither referenced
  # by PATH nor by alias.
  export CONDA_PATH

  return
}


# main

getCondaPath

